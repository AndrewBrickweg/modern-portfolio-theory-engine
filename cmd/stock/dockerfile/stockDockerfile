FROM golang:1.24

WORKDIR /usr/src/app

# Copy entire project
COPY . .

# Enter the stock module directory
WORKDIR /usr/src/app/cmd/stock

RUN go mod tidy
RUN go mod download

RUN go build -o stock-server stock.go

EXPOSE 8001

CMD ["./stock-server"]
